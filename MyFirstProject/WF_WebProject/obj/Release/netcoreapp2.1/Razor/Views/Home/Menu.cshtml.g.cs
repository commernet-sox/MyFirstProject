#pragma checksum "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "a7016d4b8d186cc934fed24e2e96e0511973b023"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Menu), @"mvc.1.0.view", @"/Views/Home/Menu.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Menu.cshtml", typeof(AspNetCore.Views_Home_Menu))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\_ViewImports.cshtml"
using WFWebProject;

#line default
#line hidden
#line 2 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\_ViewImports.cshtml"
using WFWebProject.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a7016d4b8d186cc934fed24e2e96e0511973b023", @"/Views/Home/Menu.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"dde7983aead9016f0b7a49cb549d184d43c16a26", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Menu : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 2 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
  
    ViewBag.Title = "权限管理";
    

#line default
#line hidden
            BeginContext(44, 461, true);
            WriteLiteral(@"<style type=""text/css"">
    .modal-header {
        display:block;
    }
</style>
<div class=""page-content-body"">
    <div class=""row"">
        <div class=""col-md-12"">
            <div class=""portlet light"">
                <div class=""portlet-title"">
                    <div class=""caption"">
                        <i class=""fa fa-search""></i>
                        <span class=""caption-subject bold font-grey-gallery uppercase"">权限管理查询</span>
");
            EndContext();
            BeginContext(577, 2032, true);
            WriteLiteral(@"                    </div>
                    <div class=""tools"">
                        <a href="""" class=""collapse"" data-original-title="""" title=""""> </a>
                    </div>
                </div>
                <div class=""portlet-body"">
                    <div class=""booking-search"">
                        <div class=""row form-group"">
                            <div class=""fiter col-md-4 col-xs-6"" data-column=""1"" data-name=""UserId"">
                                <label class=""control-label"">用户姓名:</label>
                                <div class=""input-icon"">
                                    <select class=""form-control"" id=""col1_filter""></select>
                                </div>
                            </div>
                        </div>
                        <div class=""row margin-top"">
                            <div class=""fiter col-md-2 col-xs-5"">
                                <button class=""btn green btn-block  margin-bottom-20"" id=""Search"">查询<i cla");
            WriteLiteral(@"ss=""m-icon-swapright m-icon-white""></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class=""row"">
        <div class=""col-md-12"">
            <table id=""myTable"" class=""table table-striped table-bordered nowrap""></table>
        </div>
        <div id=""detailDiv"" class=""col-md-12"">
            <table id=""myDetailTable"" class=""table table-striped table-bordered nowrap""></table>
        </div>
    </div>

    <div id=""customForm"" style=""padding-left: 17px;"">
        <fieldset class=""userinfo"">
            <legend>用户信息</legend>
            <div data-editor-template=""UserId""></div>
            <div data-editor-template=""UserName""></div>
        </fieldset>
        <fieldset class=""permissioninfo"">
            <legend>权限信息</legend>
            <div data-editor-template=""Contents[].ContentId""></div>
        </fieldset>
    </div>
</div>
");
            EndContext();
            DefineSection("scripts", async() => {
                BeginContext(2626, 2099, true);
                WriteLiteral(@"
    <script>
        function filterColumn(i) {
            $('#myTable').DataTable().column(i).search(
                $('#col' + i + '_filter').val(),
                false,
                false
            ).draw();
        }
        var index = -1;
        var trClose;
        var editor, table, isdisposed, table1;
        $(document).ready(function () {
            isdisposed = false;
            App.initResizeHandler();
            Layout.initAjaxContentSuccessCallback();
            App.addResizeHandler(Resize);
            Layout.addAjaxContentSuccessCallback(AjaxDispose);

            $.extend(true, $.fn.dataTable.Editor.defaults, {
        i18n: {
            create: {
                button: ""创建"",
                title: ""创建对象"",
                submit: ""创建""
            },
            edit: {
                button: ""编辑"",
                title: ""编辑对象"",
                submit: ""编辑""
            },
            remove: {
                button: ""删除"",
                tit");
                WriteLiteral(@"le: ""删除对象"",
                submit: ""删除"",
                confirm: {
                    ""_"": ""确认删除 %d 条记录?"",
                    ""1"": ""确认删除 1 条记录?""
                }
            },
            error: {
                system: ""发生了一个系统错误 (更多信息)""
            },
            multi: {
                title: ""多个值"",
                info: ""选定的项目包含输入不同的值。编辑和设置该输入值相同的所有项目，单击或点击这里，否则他们会保留单个值。"",
                restore: ""撤销"",
                noMulti: ""该输入可单独编辑，但不是一个组的一部分。""
            },
            datetime: {
                previous: '前一个',
                next: '下一个',
                months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                weekdays: ['星期天', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],
                amPm: ['上午', '下午'],
                unknown: '`'
            }
        }
    });

            editor = new $.fn.dataTable.Editor({
                idSrc: ""Id"",
                ajax: {
                    create: {
                  ");
                WriteLiteral("      type: \'POST\',\r\n                        url: \'");
                EndContext();
                BeginContext(4726, 36, false);
#line 132 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                         Write(Url.Action("Create", "UserMenuRole"));

#line default
#line hidden
                EndContext();
                BeginContext(4762, 125, true);
                WriteLiteral("\'\r\n                    },\r\n                    edit: {\r\n                        type: \'POST\',\r\n                        url: \'");
                EndContext();
                BeginContext(4888, 36, false);
#line 136 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                         Write(Url.Action("Update", "UserMenuRole"));

#line default
#line hidden
                EndContext();
                BeginContext(4924, 557, true);
                WriteLiteral(@"'
                    }
                },
                table: ""#myTable"",
                template: '#customForm',
                fields: [
                    { label: ""用户姓名:"", name: ""UserName""},
                    {
                        label: ""用户账号:"",
                        name: ""UserId"",
                        type: ""select2"",
                        opts: {
                            theme: ""classic"",
                            ajax: {
                                type: 'GET',
                                url: """);
                EndContext();
                BeginContext(5482, 42, false);
#line 151 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                                 Write(Url.Action("GetUserInfo", "CommonMethods"));

#line default
#line hidden
                EndContext();
                BeginContext(5524, 2113, true);
                WriteLiteral(@""",
                                cache: false,
                                dataType: 'json',
                                delay: 250,
                                data: function (params) {
                                    return {
                                        term: params.term, // search term 请求参数
                                        page: params.page
                                    };
                                },
                                allowClear: false,
                                processResults: function (data, params) {
                                    params.page = params.page || 1;
                                    return {
                                        results: data.items,//itemList
                                        pagination: {
                                            more: (params.page) < data.total_count
                                        }
                                    };
                     ");
                WriteLiteral(@"           },
                                multiple: false
                            },
                            tags: false,
                            escapeMarkup: function (markup) { return markup; },
                            formatResult: function formatRepo(repo) { return repo.text; },
                            formatSelection: function formatRepoSelection(repo) { return repo.text; }
                        }
                    },
                    
                    {
                         label: ""权限:"", name: ""Contents[].ContentId"", type: ""jstree_checkbox"",
                         opts: {
                             ""core"": {
                                 ""themes"": {
                                     ""responsive"": true
                                 },
                                 'check_callback': true,
                                 'data': {
                                     'cache':false,
                                     'url': functi");
                WriteLiteral("on (node) {\r\n                                         var url = \"");
                EndContext();
                BeginContext(7638, 53, false);
#line 191 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                                               Write(Url.Action("UserPermissionTreeData", "CommonMethods"));

#line default
#line hidden
                EndContext();
                BeginContext(7691, 1381, true);
                WriteLiteral(@""";
                                         return url;
                                     },
                                     'data': function (node) {
                                         return { 'id': node.id };
                                     }
                                 }
                             },
                             ""types"": {
                                 ""default"": {
                                     ""icon"": ""fa fa-sitemap icon-lg""
                                 },
                                 ""file"": {
                                     ""icon"": ""fa fa-globe icon-lg""
                                 }
                             },
                             ""plugins"": [""types"", ""wholerow""],
                             ""checkbox"": {
                                 ""keep_selected_style"": false,//是否默认选中
                                 ""three_state"": true,//父子级别级联选择
                                 ""tie_selection"": false,
     ");
                WriteLiteral(@"                            ""cascade"": ""up+undetermined""
                             }
                         }
                     }
                ]
            });

            table = $('#myTable').DataTable({
                lengthMenu: [[10, 25, 50, 100, 500], [10, 25, 50, 100, 500]],
                ajax: {
                    url: """);
                EndContext();
                BeginContext(9073, 35, false);
#line 222 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                     Write(Url.Action("Index", "UserMenuRole"));

#line default
#line hidden
                EndContext();
                BeginContext(9108, 871, true);
                WriteLiteral(@""",
                    type: ""post""
                },
                serverSide:true,
                //""searching"": false,//允许搜索
                order: [[0, 'asc']],//一定要添加
                colReorder: {
                    fixedColumnsLeft: 1
                },
                columns: [
                    { data: ""UserId"", className: ""details-control"", title: ""用户账号"", searchable: true, orderable: true, width: ""100px"" },
                    { data: ""UserName"", className: ""details-control"", title: ""用户姓名"", searchable: true, orderable: true, width: ""100px"" }
                ],
                select: {
                    style: 'single'
                },
                dom: ""<'row'<'col-sm-10'B><'col-sm-2 text-right'l>>"" +
            ""<'row'<'col-sm-12'tr>>"" +
            ""<'row'<'col-sm-5'i><'col-sm-7'p>>"",
                buttons: [
");
                EndContext();
#line 242 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                  if (1==1)
                 {
                     Output.WriteLine("{ extend: \"create\", text: \"创建\", name:\"Create\", editor: editor},");
                 }

#line default
#line hidden
                BeginContext(10161, 20, true);
                WriteLiteral("                    ");
                EndContext();
#line 246 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                     if (1==1)
                 {
                     Output.WriteLine("{ extend: \"edit\", text: \"编辑\", name:\"Edit\", editor: editor},");
                 }

#line default
#line hidden
                BeginContext(10342, 2460, true);
                WriteLiteral(@"                ]
            });

            editor.on('initCreate', function () {
                editor.show(); //Shows all fields
                editor.field('UserId').enable();
                editor.field('UserName').disable();
                editor.field('UserName').hide();
            });

            editor.on('initEdit', function () {
                editor.show(); //Shows all fields
                editor.field('UserId').disable();
                editor.field('UserName').disable();
                editor.field('UserName').hide();
                //editor.field('Memo').val(table1.row(0).data().Memo);
            });

            //预提交时
            editor.on('preSubmit', function (e, o, action) {
                if (action !== 'remove') {
                }
            });


            $('#Search').click(function () {
                var items = $(this).parents('.booking-search').find('.fiter');
                $.each(items, function (index, obj) {
                    ");
                WriteLiteral(@"var i = $(obj).attr('data-column');
                    var name = $(obj).attr('data-name') + '';
                    var val = $('#col' + i + '_filter').val();
                    if (val === null)
                        val = '';
                    var index = $('#myTable').DataTable().columns().dataSrc().indexOf(name)
                    var selectot = '.search-' + index;
                    if ($(selectot).length === 0) {
                        $('#myTable').DataTable().column(index).search(val, false, false);
                    }
                    else {
                        $('#myTable').DataTable().column($(selectot)).search(val, false, false);
                    }
                });

                $('#myTable').DataTable().columns().search().draw();
                $('#detailDiv').hide();
            });

            $('#myTable tbody').on('click', 'td.details-control', function () {
                var tr = $(this).closest('tr');
                var row = table.row(t");
                WriteLiteral(@"r);
                var curUserId = row.data().UserId;
                $('#detailDiv').show();
                $('#myDetailTable').DataTable().column(11).search(curUserId, false, false);
                $('#myDetailTable').DataTable().columns().search().draw();
            });

            $(""#col1_filter"").select2({
                ajax: {
                    type: 'GET',
                    url: """);
                EndContext();
                BeginContext(12803, 42, false);
#line 309 "C:\Users\FS\source\repos\MyFirstProject\WF_WebProject\Views\Home\Menu.cshtml"
                     Write(Url.Action("GetUserInfo", "CommonMethods"));

#line default
#line hidden
                EndContext();
                BeginContext(12845, 1925, true);
                WriteLiteral(@""",
                    cache: false,
                    //dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            term: params.term, // search term 请求参数
                            page: params.page
                        };
                    },
                    allowClear: false,
                    processResults: function (data, params) {
                        params.page = params.page || 1;
                        return {
                            results: data.items,//itemList
                            pagination: {
                                more: (params.page) < data.total_count
                            }
                        };
                    },
                    multiple: false
                },
                theme: ""classic"",
                tags: false,
                escapeMarkup: function (markup) { return markup; },
                form");
                WriteLiteral(@"atResult: function formatRepo(repo) { return repo.text; },
                formatSelection: function formatRepoSelection(repo) { return repo.text; }
            });

            $('#detailDiv').hide();
        });

        function Resize() {
            $('#myTable').DataTable()
                .columns.adjust()
                .responsive.recalc();
        }

        function AjaxDispose() {
            if (!isdisposed) {
                isdisposed = true;
                try {
                    table.destroy();
                    table1.destroy();
                    if (editor.s.template) {
                        editor.s.template = null;
                    }
                    editor.destroy();
                }
                catch
                {
                    console.log(""释放失败"");
                }
            }
        }
    </script>
");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
